(()=>{"use strict";var t=document.body.appendChild(document.createElement("div"));t.id="screenshot-bbox",t.style.zIndex="9999999",t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.width="0px",t.style.height="0px";var e=!1,o=!1,n=void 0,i=void 0,c=function(){t.style.removeProperty("top"),t.style.removeProperty("left"),t.style.removeProperty("bottom"),t.style.removeProperty("right"),t.style.removeProperty("width"),t.style.removeProperty("height")},s=function(){e=!1,o=!1,n=void 0,i=void 0,document.body.classList.remove("no-select"),c(),t.classList.remove("active")};window.addEventListener("mousedown",function(e){e.altKey&&(document.body.classList.add("no-select"),o=!0,n=e.clientX,i=e.clientY,t.style.top="".concat(i,"px"),t.style.left="".concat(n,"px"),t.style.width="0px",t.style.height="0px",t.classList.add("active"))});var d=function(t,e){return[t<0?0:t,e<0?0:e]};window.addEventListener("mousemove",function(e){if(o&&void 0!==n&&void 0!==i){var s=d(e.clientX,e.clientY),l=s[0],a=s[1],r=Math.abs(l-n),y=Math.abs(a-i);c(),i<=a&&n<=l?(t.style.top="".concat(i,"px"),t.style.left="".concat(n,"px")):i<=a&&n>=l?(t.style.top="".concat(i,"px"),t.style.right="".concat(document.body.clientWidth-n,"px")):i>=a&&n<=l?(t.style.bottom="".concat(window.innerHeight-i,"px"),t.style.left="".concat(n,"px")):i>=a&&n>=l&&(t.style.bottom="".concat(window.innerHeight-i,"px"),t.style.right="".concat(document.body.clientWidth-n,"px")),t.style.width="".concat(r,"px"),t.style.height="".concat(y,"px")}}),window.addEventListener("mouseup",function(t){if(o&&void 0!==n&&void 0!==i){var e=d(t.clientX,t.clientY),c=e[0],l=e[1],a={x:Math.min(n,c),y:Math.min(i,l),width:Math.abs(n-c),height:Math.abs(i-l)},r={width:window.innerWidth,height:window.innerHeight,scrollX:window.scrollX||document.documentElement.scrollLeft,scrollY:window.scrollY||document.documentElement.scrollTop};s(),setTimeout(function(){chrome.runtime.sendMessage({msg:"SCREENSHOT_WITH_COORDINATES",rect:a,windowSize:r})},1)}}),window.addEventListener("keydown",function(t){"Escape"===t.key?s():t.altKey&&(e=!0,document.body.classList.add("no-select"))}),window.addEventListener("keyup",function(t){e&&!t.altKey&&(e=!1,o||document.body.classList.remove("no-select"))}),chrome.runtime.onMessage.addListener(function(t,e,o){"SHOW_NOTIFICATION"===t.type&&(!function(t,e){void 0===e&&(e="info");var o=document.createElement("div"),n="screenshot-toast-".concat(Date.now());o.id=n,o.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    z-index: 9999999;\n    padding: 12px 16px;\n    border-radius: 4px;\n    font-size: 14px;\n    font-weight: 500;\n    max-width: 300px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n    word-wrap: break-word;\n    opacity: 0;\n    transition: opacity 0.3s ease-out;\n    ".concat({success:"background-color: #10b981; color: white;",error:"background-color: #ef4444; color: white;",info:"background-color: #3b82f6; color: white;"}[e],"\n  "),o.textContent=t,document.body.appendChild(o),setTimeout(function(){o.style.opacity="1"},10),setTimeout(function(){o.style.opacity="0",setTimeout(function(){var t=document.getElementById(n);t&&t.remove()},300)},3e3)}(t.message,t.notificationType||"info"),o({success:!0}))})})();