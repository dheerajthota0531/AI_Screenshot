(()=>{"use strict";var t=document.body.appendChild(document.createElement("div"));t.id="screenshot-bbox",t.style.zIndex="9999999",t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.width="0px",t.style.height="0px";var e=!1,o=!1,n=void 0,i=void 0,s=function(){t.style.removeProperty("top"),t.style.removeProperty("left"),t.style.removeProperty("bottom"),t.style.removeProperty("right"),t.style.removeProperty("width"),t.style.removeProperty("height")},c=function(){e=!1,o=!1,n=void 0,i=void 0,document.body.classList.remove("no-select"),s(),t.classList.remove("active")};window.addEventListener("mousedown",function(e){e.altKey&&(document.body.classList.add("no-select"),o=!0,n=e.clientX,i=e.clientY,t.style.top="".concat(i,"px"),t.style.left="".concat(n,"px"),t.style.width="0px",t.style.height="0px",t.classList.add("active"))});var d=function(t,e){return[t<0?0:t,e<0?0:e]};window.addEventListener("mousemove",function(e){if(o&&void 0!==n&&void 0!==i){var c=d(e.clientX,e.clientY),l=c[0],a=c[1],r=Math.abs(l-n),y=Math.abs(a-i);s(),i<=a&&n<=l?(t.style.top="".concat(i,"px"),t.style.left="".concat(n,"px")):i<=a&&n>=l?(t.style.top="".concat(i,"px"),t.style.right="".concat(document.body.clientWidth-n,"px")):i>=a&&n<=l?(t.style.bottom="".concat(window.innerHeight-i,"px"),t.style.left="".concat(n,"px")):i>=a&&n>=l&&(t.style.bottom="".concat(window.innerHeight-i,"px"),t.style.right="".concat(document.body.clientWidth-n,"px")),t.style.width="".concat(r,"px"),t.style.height="".concat(y,"px")}}),window.addEventListener("mouseup",function(t){if(o&&void 0!==n&&void 0!==i){var e=d(t.clientX,t.clientY),s=e[0],l=e[1],a={x:Math.min(n,s),y:Math.min(i,l),width:Math.abs(n-s),height:Math.abs(i-l)},r={width:window.innerWidth,height:window.innerHeight};c(),setTimeout(function(){chrome.runtime.sendMessage({msg:"SCREENSHOT_WITH_COORDINATES",rect:a,windowSize:r})},1)}}),window.addEventListener("keydown",function(t){"Escape"===t.key?c():t.altKey&&(e=!0,document.body.classList.add("no-select"))}),window.addEventListener("keyup",function(t){e&&!t.altKey&&(e=!1,o||document.body.classList.remove("no-select"))})})();