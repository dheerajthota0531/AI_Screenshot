(()=>{"use strict";var t=document.body.appendChild(document.createElement("div"));t.id="screenshot-bbox",t.style.zIndex="9999999",t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.width="0px",t.style.height="0px";var e=!1,o=!1,n=void 0,i=void 0,c=function(){t.style.removeProperty("top"),t.style.removeProperty("left"),t.style.removeProperty("bottom"),t.style.removeProperty("right"),t.style.removeProperty("width"),t.style.removeProperty("height")},s=function(){e=!1,o=!1,n=void 0,i=void 0,document.body.classList.remove("no-select"),c(),t.classList.remove("active")};window.addEventListener("mousedown",function(e){e.altKey&&(document.body.classList.add("no-select"),o=!0,n=e.clientX,i=e.clientY,t.style.top="".concat(i,"px"),t.style.left="".concat(n,"px"),t.style.width="0px",t.style.height="0px",t.classList.add("active"))});var d=function(t,e){return[t<0?0:t,e<0?0:e]};window.addEventListener("mousemove",function(e){if(o&&void 0!==n&&void 0!==i){var s=d(e.clientX,e.clientY),l=s[0],r=s[1],a=Math.abs(l-n),y=Math.abs(r-i);c(),i<=r&&n<=l?(t.style.top="".concat(i,"px"),t.style.left="".concat(n,"px")):i<=r&&n>=l?(t.style.top="".concat(i,"px"),t.style.right="".concat(document.body.clientWidth-n,"px")):i>=r&&n<=l?(t.style.bottom="".concat(window.innerHeight-i,"px"),t.style.left="".concat(n,"px")):i>=r&&n>=l&&(t.style.bottom="".concat(window.innerHeight-i,"px"),t.style.right="".concat(document.body.clientWidth-n,"px")),t.style.width="".concat(a,"px"),t.style.height="".concat(y,"px")}}),window.addEventListener("mouseup",function(t){if(o&&void 0!==n&&void 0!==i){var e=d(t.clientX,t.clientY),c=e[0],l=e[1],r={x:Math.min(n,c),y:Math.min(i,l),width:Math.abs(n-c),height:Math.abs(i-l)},a={width:window.innerWidth,height:window.innerHeight,scrollX:window.scrollX||document.documentElement.scrollLeft,scrollY:window.scrollY||document.documentElement.scrollTop};s(),setTimeout(function(){chrome.runtime.sendMessage({msg:"SCREENSHOT_WITH_COORDINATES",rect:r,windowSize:a})},1)}}),window.addEventListener("keydown",function(t){"Escape"===t.key?s():t.altKey&&(e=!0,document.body.classList.add("no-select"))}),window.addEventListener("keyup",function(t){e&&!t.altKey&&(e=!1,o||document.body.classList.remove("no-select"))})})();